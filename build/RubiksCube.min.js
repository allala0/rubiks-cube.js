(()=>{var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};(()=>{"use strict";e.d(t,{default:()=>b});const i=THREE,s=new i.Vector3;function r(e,t,i,r,l,n){const h=2*Math.PI*l/4,u=Math.max(n-2*l,0),o=Math.PI/4;s.copy(t),s[r]=0,s.normalize();const a=.5*h/(h+u),c=1-s.angleTo(e)/o;return 1===Math.sign(s[i])?c*a:u/(h+u)+a+a*(1-c)}class l extends i.BoxGeometry{constructor(e=1,t=1,s=1,l=2,n=.1){if(l=2*l+1,n=Math.min(e/2,t/2,s/2,n),super(1,1,1,l,l,l),1===l)return;const h=this.toNonIndexed();this.index=null,this.attributes.position=h.attributes.position,this.attributes.normal=h.attributes.normal,this.attributes.uv=h.attributes.uv;const u=new i.Vector3,o=new i.Vector3,a=new i.Vector3(e,t,s).divideScalar(2).subScalar(n),c=this.attributes.position.array,d=this.attributes.normal.array,v=this.attributes.uv.array,_=c.length/6,b=new i.Vector3,f=.5/l;for(let i=0,l=0;i<c.length;i+=3,l+=2)switch(u.fromArray(c,i),o.copy(u),o.x-=Math.sign(o.x)*f,o.y-=Math.sign(o.y)*f,o.z-=Math.sign(o.z)*f,o.normalize(),c[i+0]=a.x*Math.sign(u.x)+o.x*n,c[i+1]=a.y*Math.sign(u.y)+o.y*n,c[i+2]=a.z*Math.sign(u.z)+o.z*n,d[i+0]=o.x,d[i+1]=o.y,d[i+2]=o.z,Math.floor(i/_)){case 0:b.set(1,0,0),v[l+0]=r(b,o,"z","y",n,s),v[l+1]=1-r(b,o,"y","z",n,t);break;case 1:b.set(-1,0,0),v[l+0]=1-r(b,o,"z","y",n,s),v[l+1]=1-r(b,o,"y","z",n,t);break;case 2:b.set(0,1,0),v[l+0]=1-r(b,o,"x","z",n,e),v[l+1]=r(b,o,"z","x",n,s);break;case 3:b.set(0,-1,0),v[l+0]=1-r(b,o,"x","z",n,e),v[l+1]=1-r(b,o,"z","x",n,s);break;case 4:b.set(0,0,1),v[l+0]=1-r(b,o,"x","y",n,e),v[l+1]=1-r(b,o,"y","x",n,t);break;case 5:b.set(0,0,-1),v[l+0]=r(b,o,"x","y",n,e),v[l+1]=1-r(b,o,"y","x",n,t)}}}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function v(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(o,e);var t,s,r,n,h=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(n){var i=_(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return v(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a(this,o),(e=h.call(this)).opacity=1,e.color=16777215,e.select_color=13421772,e.color=0,e.select_color=15658734,e.size=t,e.colors=[255,16777215,16735232,65280,16776960,16711680],e.cube=e.generate(),e.model=e.generate_model(),e.move_queue=[],e.current_move=null,e.current_layer_tiles=null,e.current_layer_cubies=null,e.step=null,e.moves_executed=[],e.isSolved=!0,e.move_speed=.075,e.index=null,e.ray=null,e.side=null,e.intersects=!1,e.raycaster=new i.Raycaster,e.mouse=new i.Vector2(1,1),e.camera=s,e.domElement=r,e.controls=l,e.controlsLastEnabled=null,null!==e.camera&&null!==e.domElement&&(e.domElement.addEventListener("mousedown",(function(){var t;e.handleMouseDown(),e.controlsLastEnabled=null===(t=e.controls)||void 0===t?void 0:t.enableRotate,null!==e.controls&&(e.controls.enableRotate=!e.intersects)})),e.domElement.addEventListener("mouseup",(function(){e.handleMouseUp(),null!==e.controls&&null!==e.controlsLastEnabled&&(e.controls.enableRotate=e.controlsLastEnabled)})),e.domElement.addEventListener("mousemove",(function(t){e.mouse.x=(t.clientX-e.domElement.getBoundingClientRect().left)/e.domElement.clientWidth*2-1,e.mouse.y=-(t.clientY-e.domElement.getBoundingClientRect().top)/e.domElement.clientHeight*2+1}))),e}return t=o,s=[{key:"generate",value:function(){for(var e=[],t=0;t<this.size;t++){for(var i=[],s=0;s<this.size;s++){for(var r=[],l=0;l<this.size;l++){var n=function(e,t,i){return e>t&&e<i},h=[0,1,2,3,4,5];if(n(t,0,this.size-1)&&n(s,0,this.size-1)&&n(l,0,this.size-1))h=[null,null,null,null,null,null];else if(0==t&&0==s&&0==l){var u=[null,null,null];h[2]=u[0],h[3]=u[1],h[4]=u[2]}else if(0==t&&0==s&&l==this.size-1){var o=[null,null,null];h[0]=o[0],h[2]=o[1],h[4]=o[2]}else if(0==t&&s==this.size-1&&0==l){var a=[null,null,null];h[1]=a[0],h[2]=a[1],h[3]=a[2]}else if(0==t&&s==this.size-1&&l==this.size-1){var c=[null,null,null];h[0]=c[0],h[1]=c[1],h[2]=c[2]}else if(t==this.size-1&&0==s&&0==l){var d=[null,null,null];h[3]=d[0],h[4]=d[1],h[5]=d[2]}else if(t==this.size-1&&0==s&&l==this.size-1){var v=[null,null,null];h[0]=v[0],h[4]=v[1],h[5]=v[2]}else if(t==this.size-1&&s==this.size-1&&0==l){var _=[null,null,null];h[1]=_[0],h[3]=_[1],h[5]=_[2]}else if(t==this.size-1&&s==this.size-1&&l==this.size-1){var b=[null,null,null];h[0]=b[0],h[1]=b[1],h[5]=b[2]}else if(0==t&&0==s&&n(l,0,this.size-1)){var f=[null,null,null,null];h[0]=f[0],h[2]=f[1],h[3]=f[2],h[4]=f[3]}else if(0==t&&s==this.size-1&&n(l,0,this.size-1)){var m=[null,null,null,null];h[0]=m[0],h[1]=m[1],h[2]=m[2],h[3]=m[3]}else if(0==t&&n(s,0,this.size-1)&&0==l){var p=[null,null,null,null];h[1]=p[0],h[2]=p[1],h[3]=p[2],h[4]=p[3]}else if(0==t&&n(s,0,this.size-1)&&l==this.size-1){var y=[null,null,null,null];h[0]=y[0],h[1]=y[1],h[2]=y[2],h[4]=y[3]}else if(n(t,0,this.size-1)&&0==s&&0==l){var g=[null,null,null,null];h[2]=g[0],h[3]=g[1],h[4]=g[2],h[5]=g[3]}else if(n(t,0,this.size-1)&&0==s&&l==this.size-1){var x=[null,null,null,null];h[0]=x[0],h[2]=x[1],h[4]=x[2],h[5]=x[3]}else if(n(t,0,this.size-1)&&s==this.size-1&&0==l){var z=[null,null,null,null];h[1]=z[0],h[2]=z[1],h[3]=z[2],h[5]=z[3]}else if(n(t,0,this.size-1)&&s==this.size-1&&l==this.size-1){var M=[null,null,null,null];h[0]=M[0],h[1]=M[1],h[2]=M[2],h[5]=M[3]}else if(t==this.size-1&&0==s&&n(l,0,this.size-1)){var w=[null,null,null,null];h[0]=w[0],h[3]=w[1],h[4]=w[2],h[5]=w[3]}else if(t==this.size-1&&s==this.size-1&&n(l,0,this.size-1)){var O=[null,null,null,null];h[0]=O[0],h[1]=O[1],h[3]=O[2],h[5]=O[3]}else if(t==this.size-1&&n(s,0,this.size-1)&&0==l){var j=[null,null,null,null];h[1]=j[0],h[3]=j[1],h[4]=j[2],h[5]=j[3]}else if(t==this.size-1&&n(s,0,this.size-1)&&l==this.size-1){var q=[null,null,null,null];h[0]=q[0],h[1]=q[1],h[4]=q[2],h[5]=q[3]}else if(0==t&&n(s,0,this.size-1)&&n(l,0,this.size-1)){var k=[null,null,null,null,null];h[0]=k[0],h[1]=k[1],h[2]=k[2],h[3]=k[3],h[4]=k[4]}else if(n(t,0,this.size-1)&&n(s,0,this.size-1)&&0==l){var P=[null,null,null,null,null];h[1]=P[0],h[2]=P[1],h[3]=P[2],h[4]=P[3],h[5]=P[4]}else if(n(t,0,this.size-1)&&n(s,0,this.size-1)&&l==this.size-1){var E=[null,null,null,null,null];h[0]=E[0],h[1]=E[1],h[2]=E[2],h[4]=E[3],h[5]=E[4]}else if(n(t,0,this.size-1)&&0==s&&n(l,0,this.size-1)){var S=[null,null,null,null,null];h[0]=S[0],h[2]=S[1],h[3]=S[2],h[4]=S[3],h[5]=S[4]}else if(n(t,0,this.size-1)&&s==this.size-1&&n(l,0,this.size-1)){var C=[null,null,null,null,null];h[0]=C[0],h[1]=C[1],h[2]=C[2],h[3]=C[3],h[5]=C[4]}else if(t==this.size-1&&n(s,0,this.size-1)&&n(l,0,this.size-1)){var R=[null,null,null,null,null];h[0]=R[0],h[1]=R[1],h[3]=R[2],h[4]=R[3],h[5]=R[4]}r.push(h)}i.push(r)}e.push(i)}return e}},{key:"move",value:function(e,t,i){for(var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=0;r<s;r++){for(var l=[],n=0;n<this.cube.length;n++){for(var h=[],u=0;u<this.cube[n].length;u++){for(var o=[],a=0;a<this.cube[n][u].length;a++)o.push(this.cube[n][u][a].slice());h.push(o)}l.push(h)}if("Y"==e)for(var c=0;c<l[t].length;c++)for(var d=0;d<l[t][c].length;d++){var v=l[t][c][d];if(1==i){var _=[v[4],v[0],v[1],v[3]];v[0]=_[0],v[1]=_[1],v[3]=_[2],v[4]=_[3],this.cube[t][d][l.length-1-c]=v}else if(0==i){var b=[v[0],v[1],v[3],v[4]];v[4]=b[0],v[0]=b[1],v[1]=b[2],v[3]=b[3],this.cube[t][l.length-1-d][c]=v}}else if("Z"==e)for(var f=0;f<l.length;f++)for(var m=0;m<l[f].length;m++){var p=l[f][m][t];if(1==i){var y=[p[2],p[4],p[5],p[1]];p[1]=y[0],p[2]=y[1],p[4]=y[2],p[5]=y[3],this.cube[m][l.length-1-f][t]=p}else if(0==i){var g;g=[p[1],p[2],p[4],p[5]],p[2]=g[0],p[4]=g[1],p[5]=g[2],p[1]=g[3],this.cube[l.length-1-m][f][t]=p}}else if("X"==e)for(var x=0;x<l.length;x++)for(var z=0;z<l[x][t].length;z++){var M=l[x][t][z];if(0==i){var w=[M[2],M[3],M[5],M[0]];M[0]=w[0],M[2]=w[1],M[3]=w[2],M[5]=w[3],this.cube[z][t][l.length-1-x]=M}else if(1==i){var O=[M[0],M[2],M[3],M[5]];M[2]=O[0],M[3]=O[1],M[5]=O[2],M[0]=O[3],this.cube[l.length-1-z][t][x]=M}}}}},{key:"generate_model",value:function(){this.middle=Math.floor(this.size/2),this.size%2==0&&(this.middle-=.5);var e=.05;this.tiles_hitboxes=[],this.tiles=[],this.cubies=[],this.tiles_hitboxes_group=new i.Group,this.tiles_group=new i.Group,this.cubies_group=new i.Group;for(var t=0;t<this.cube.length;t++){for(var s=[],r=[],n=[],h=0;h<this.cube[t].length;h++){for(var u=[],o=[],a=[],c=0;c<this.cube[t][h].length;c++){for(var d=[],v=[],_=0;_<this.cube[t][h][c].length;_++){var b=null,f=null,m=null,p=null,y=null;null!==this.cube[t][h][c][_]&&(0==_?(m=[1*(t-this.middle),1*(h-this.middle),-(0*this.middle+this.size/2)],p=[.85,.85,e],y=[1,1,e]):1==_?(m=[1*(t-this.middle),-(0*this.middle+this.size/2),1*(c-this.middle)],p=[.85,e,.85],y=[1,e,1]):2==_?(m=[0*this.middle+this.size/2,1*(h-this.middle),1*(c-this.middle)],p=[e,.85,.85],y=[e,1,1]):3==_?(m=[1*(t-this.middle),1*(h-this.middle),0*this.middle+this.size/2],p=[.85,.85,e],y=[1,1,e]):4==_?(m=[1*(t-this.middle),0*this.middle+this.size/2,1*(c-this.middle)],p=[.85,e,.85],y=[1,e,1]):5==_&&(m=[-(0*this.middle+this.size/2),1*(h-this.middle),1*(c-this.middle)],p=[e,.85,.85],y=[e,1,1])),null!=this.cube[t][h][c][_]&&(b=new i.Mesh(new l(p[0],p[1],p[2],2,1),new i.MeshPhongMaterial({color:this.colors[this.cube[t][h][c][_]],transparent:!0,opacity:this.opacity})),(f=new i.Mesh(new i.BoxGeometry(y[0],y[1],y[2]),new i.MeshPhongMaterial({}))).visible=!1,b.position.set(m[0],m[1],m[2]),f.position.set(m[0],m[1],m[2]),b.castShadow=!0,b.receiveShadow=!0,this.tiles_group.add(b),this.tiles_hitboxes_group.add(f)),d.push(f),v.push(b)}for(var g=null,x=!0,z=0;z<v.length;z++)null!=v[z]&&(x=!1);x||((g=new i.Mesh(new l(1,1,1,1,.05),new i.MeshPhongMaterial({color:0,transparent:!0,opacity:this.opacity}))).position.set(1*(t-this.middle),1*(h-this.middle),1*(c-this.middle)),this.cubies_group.add(g)),u.push(d),o.push(v),a.push(g)}s.push(u),r.push(o),n.push(a)}this.tiles_hitboxes.push(s),this.tiles.push(r),this.cubies.push(n)}this.add(this.tiles_hitboxes_group),this.add(this.tiles_group),this.add(this.cubies_group),this.inner_cubies_group=new i.Group,this.inner_cubies=[];for(var M=0;M<(this.size-2)*(this.size-2);M++){var w=new i.Mesh(new i.BoxGeometry(1,1,1),new i.MeshPhongMaterial({color:0}));w.position.set(0,0,0),this.inner_cubies_group.add(w),this.inner_cubies.push(w)}this.add(this.inner_cubies_group)}},{key:"get_layer",value:function(e,t){var s=new i.Group,r=new i.Group,l=0;if(-1==t){for(var n=0;n<this.cubies;n++)for(var h=0;h<this.cubies[n].length;h++)for(var u=0;u<this.cubies[n][h].length;u++){null!=this.cubies[n][h][u]&&r.add(this.cubies);for(var o=0;o<this.tiles[n][h][u].length;o++)null!=this.tiles[n][h][u][o]&&s.add(this.tiles[n][h][u][o])}for(var a=0;a<this.inner_cubies;a++)r.add(this.inner_cubies[a])}else if("Y"==e)for(var c=0;c<this.cube[t].length;c++)for(var d=0;d<this.cube[t][c].length;d++){var v=this.cubies[t][c][d];null!=v?r.add(v):(this.inner_cubies[l].position.set(t-this.middle,c-this.middle,d-this.middle),r.add(this.inner_cubies[l]),l+=1);for(var _=this.tiles[t][c][d],b=0;b<_.length;b++)null!=_[b]&&s.add(_[b])}else if("Z"==e)for(var f=0;f<this.cube.length;f++)for(var m=0;m<this.cube[f].length;m++){var p=this.cubies[f][m][t];null!=p?r.add(p):(this.inner_cubies[l].position.set(f-this.middle,m-this.middle,t-this.middle),r.add(this.inner_cubies[l]),l+=1);for(var y=this.tiles[f][m][t],g=0;g<y.length;g++)null!=y[g]&&s.add(y[g])}else if("X"==e)for(var x=0;x<this.cube.length;x++)for(var z=0;z<this.cube[x][t].length;z++){var M=this.cubies[x][t][z];null!=M?r.add(M):(this.inner_cubies[l].position.set(x-this.middle,t-this.middle,z-this.middle),r.add(this.inner_cubies[l]),l+=1);for(var w=this.tiles[x][t][z],O=0;O<w.length;O++)null!=w[O]&&s.add(w[O])}return this.add(s),this.add(r),[s,r]}},{key:"update",value:function(){if(this.solveCheck()&&!this.isSolved&&console.log("Congratulations, you solved the cube!"),this.isSolved=this.solveCheck(),this.current_layer_tiles&&null!=this.current_layer_cubies&&null!=this.current_move)if("Y"==this.current_move[0]){if(this.current_layer_tiles.rotation.x+=this.step,this.current_layer_cubies.rotation.x+=this.step,Math.abs(this.current_layer_tiles.rotation.x)>=Math.abs(this.destination_angle)){var e=1;for(this.current_move.length>3&&(e=this.current_move[3]),this.move(this.current_move[0],this.current_move[1],this.current_move[2],e),this.current_layer_tiles.rotation.x=0,this.current_layer_cubies.rotation.x=0;this.current_layer_cubies.children.length>0;)this.cubies_group.add(this.current_layer_cubies.children[0]);for(;this.current_layer_tiles.children.length>0;)this.tiles_group.add(this.current_layer_tiles.children[0]);this.moves_executed.push(this.current_move),this.current_layer_tiles=null,this.current_layer_cubies=null,this.current_move=null,this.destination_angle=null,this.step=null}}else if("X"==this.current_move[0]){if(this.current_layer_tiles.rotation.y+=this.step,this.current_layer_cubies.rotation.y+=this.step,Math.abs(this.current_layer_tiles.rotation.y)>=Math.abs(this.destination_angle)){var t=1;for(this.current_move.length>3&&(t=this.current_move[3]),this.move(this.current_move[0],this.current_move[1],this.current_move[2],t),this.current_layer_tiles.rotation.y=0,this.current_layer_cubies.rotation.y=0;this.current_layer_cubies.children.length>0;)this.cubies_group.add(this.current_layer_cubies.children[0]);for(;this.current_layer_tiles.children.length>0;)this.tiles_group.add(this.current_layer_tiles.children[0]);this.moves_executed.push(this.current_move),this.current_layer_tiles=null,this.current_layer_cubies=null,this.current_move=null,this.destination_angle=null,this.step=null}}else if("Z"==this.current_move[0]&&(this.current_layer_tiles.rotation.z+=this.step,this.current_layer_cubies.rotation.z+=this.step,Math.abs(this.current_layer_tiles.rotation.z)>=Math.abs(this.destination_angle))){var i=1;for(this.current_move.length>3&&(i=this.current_move[3]),this.move(this.current_move[0],this.current_move[1],this.current_move[2],i),this.current_layer_tiles.rotation.z=0,this.current_layer_cubies.rotation.z=0;this.current_layer_cubies.children.length>0;)this.cubies_group.add(this.current_layer_cubies.children[0]);for(;this.current_layer_tiles.children.length>0;)this.tiles_group.add(this.current_layer_tiles.children[0]);this.moves_executed.push(this.current_move),this.current_layer_tiles=null,this.current_layer_cubies=null,this.current_move=null,this.destination_angle=null,this.step=null}if(this.move_queue.length>0&&null==this.current_move&&null==this.current_layer)if("clear"==this.move_queue[0])this.moves_executed=[],this.move_queue.shift();else{this.current_move=this.move_queue.shift();var s=this.get_layer(this.current_move[0],this.current_move[1]);this.current_layer_tiles=s[0],this.current_layer_cubies=s[1];var r=1;1==this.current_move[2]&&(r=-1),this.current_move.length>3&&(r*=this.current_move[3]),this.destination_angle=Math.PI/2*r,this.step=this.destination_angle*this.move_speed}this.resetMaterials(),this.hover(),this.solveCheck(),this.intersects?document.body.style.cursor="pointer":document.body.style.cursor="default"}},{key:"hover",value:function(){var e=this.mouse,t=this.camera,i=!1;this.raycaster.setFromCamera(e,t);var s=this.raycaster.intersectObjects(this.tiles_hitboxes_group.children);if(s.length>0&&!i)for(var r=0;r<this.tiles_hitboxes.length;r++)for(var l=0;l<this.tiles_hitboxes[r].length;l++)for(var n=0;n<this.tiles_hitboxes[r][l].length;n++)for(var h=0;h<this.tiles_hitboxes[r][l][n].length;h++)this.tiles_hitboxes[r][l][n][h]==s[0].object&&(this.cubies[r][l][n].material.color.setHex(this.select_color),i=!0);this.intersects=i}},{key:"resetMaterials",value:function(){for(var e=0;e<this.cubies_group.children.length;e++)this.cubies_group.children[e].material.color.setHex(this.color)}},{key:"solveCheck",value:function(){for(var e=0;e<this.cube.length;e++)for(var t=0;t<this.cube[e].length;t++)for(var i=0;i<this.cube[e][t].length;i++)for(var s=this.tiles[e][t][i],r=this.cube[e][t][i],l=0;l<r.length;l++)null!=r[l]&&s[l].material.color.set(this.colors[r[l]])}},{key:"random_moves",value:function(e){for(var t=[],i=0;i<e;i++){var s=["X","Y","Z"],r=Math.floor(3*Math.random()),l=Math.floor(Math.random()*this.size);if(i>0)for(;s[r]==t[t.length-1][0]&&l==t[t.length-1][1];)r=Math.floor(3*Math.random()),l=Math.floor(Math.random()*this.size);t.push([s[r],l,Math.floor(2*Math.random()),Math.floor(2*Math.random())+1])}return t}},{key:"undo_moves",value:function(){if(this.move_queue=[],null!=this.current_move){var e=0;0==this.current_move[2]&&(e=1);var t=1;this.current_move.length>3&&(t=this.current_move[3]),this.move_queue.push([this.current_move[0],this.current_move[1],e,t])}for(var i=this.moves_executed.length-1;i>=0;i--){var s=0;0==this.moves_executed[i][2]&&(s=1);var r=1;this.moves_executed[i].length>3&&(r=this.moves_executed[i][3]),this.move_queue.push([this.moves_executed[i][0],this.moves_executed[i][1],s,r])}this.move_queue.push("clear")}},{key:"scramble",value:function(){this.move_queue=this.random_moves(3*this.size)}},{key:"rotate",value:function(e){this.current_layer_tiles=this.tiles_group,this.current_layer_cubies=this.cubies_group,this.move_queue.push([e])}},{key:"handleMouseDown",value:function(){var e=this.mouse,t=this.camera;this.raycaster.setFromCamera(e,t),this.ray=[u({},this.raycaster.ray.direction),u({},this.raycaster.ray.origin)];var i=this.raycaster.intersectObjects(this.tiles_hitboxes_group.children),s=!1;if(i.length>0){for(var r=0;r<this.cube.length;r++)for(var l=0;l<this.cube[r].length;l++)this.tiles_hitboxes[r][l][0][0]==i[0].object&&(this.side="left",s=!0,this.index=[r,l,0]);for(var n=0;n<this.cube.length;n++)for(var h=[],o=0;o<this.cube[n].length;o++)h.push(this.tiles[n][o][this.cube.length-1][3]),this.tiles_hitboxes[n][o][this.cube.length-1][3]==i[0].object&&(this.side="right",s=!0,this.index=[n,o,this.cube.length-1]);for(var a=0;a<this.cube.length;a++)for(var c=[],d=0;d<this.cube[a][0].length;d++)c.push(this.tiles[a][0][d][1]),this.tiles_hitboxes[a][0][d][1]==i[0].object&&(this.side="down",s=!0,this.index=[a,0,d]);for(var v=0;v<this.cube.length;v++)for(var _=[],b=0;b<this.cube[v][this.cube.length-1].length;b++)_.push(this.tiles[v][this.cube.length-1][b][4]),this.tiles_hitboxes[v][this.cube.length-1][b][4]==i[0].object&&(this.side="up",s=!0,this.index=[v,this.cube.length-1,b]);for(var f=0;f<this.cube[0].length;f++)for(var m=[],p=0;p<this.cube[f].length;p++)m.push(this.tiles[0][f][p][5]),this.tiles_hitboxes[0][f][p][5]==i[0].object&&(this.side="front",s=!0,this.index=[0,f,p]);for(var y=0;y<this.cube[this.cube.length-1].length;y++)for(var g=[],x=0;x<this.cube[y].length;x++)g.push(this.tiles[this.cube.length-1][y][x][2]),this.tiles_hitboxes[this.cube.length-1][y][x][2]==i[0].object&&(this.side="back",s=!0,this.index=[this.cube.length-1,y,x])}this.intersects=s}},{key:"handleMouseUp",value:function(){var e=this.mouse,t=this.camera;if(this.resetMaterials(),null!=this.index){this.raycaster.setFromCamera(e,t);var i,s,r=this.raycaster.ray.direction,l=[this.ray[0].x-r.x,this.ray[0].y-r.y,this.ray[0].z-r.z];"left"==this.side?(i=l[0],s=l[1],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["X",this.index[1],0]):this.move_queue.push(["X",this.index[1],1]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["Y",this.index[0],1]):this.move_queue.push(["Y",this.index[0],0]))):"right"==this.side?(i=l[0],s=l[1],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["X",this.index[1],1]):this.move_queue.push(["X",this.index[1],0]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["Y",this.index[0],0]):this.move_queue.push(["Y",this.index[0],1]))):"down"==this.side?(i=l[0],s=l[2],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["Z",this.index[2],1]):this.move_queue.push(["Z",this.index[2],0]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["Y",this.index[0],0]):this.move_queue.push(["Y",this.index[0],1]))):"up"==this.side?(i=l[0],s=l[2],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["Z",this.index[2],0]):this.move_queue.push(["Z",this.index[2],1]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["Y",this.index[0],1]):this.move_queue.push(["Y",this.index[0],0]))):"front"==this.side?(i=l[1],s=l[2],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["Z",this.index[2],0]):this.move_queue.push(["Z",this.index[2],1]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["X",this.index[1],1]):this.move_queue.push(["X",this.index[1],0]))):"back"==this.side&&(i=l[1],s=l[2],Math.abs(i)>Math.abs(s)?i>0?this.move_queue.push(["Z",this.index[2],1]):this.move_queue.push(["Z",this.index[2],0]):Math.abs(i)<Math.abs(s)&&(s>0?this.move_queue.push(["X",this.index[1],0]):this.move_queue.push(["X",this.index[1],1]))),this.raycaster.setFromCamera(e,t),l=[this.ray[0].x-r.x,this.ray[0].y-r.y,this.ray[0].z-r.z],this.cubies[this.index[0]][this.index[1]][this.index[2]].material.color.setHex(this.color),this.raycaster.setFromCamera(e,t);var n=this.raycaster.intersectObjects(this.tiles_hitboxes_group.children);this.intersects=n,this.index=null}}}],s&&c(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Group)})(),RubiksCube=t.default})();